<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏–º—É–ª—è—Ç–æ—Ä –†–æ–¥–∏—Ç–µ–ª—è: –£–ª—å—Ç—Ä–∞-–°–ª–æ–∂–Ω—ã–π –†–µ–∂–∏–º</title>
    <style>
        /* –ó–¥–µ—Å—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –¥–∏–∑–∞–π–Ω (CSS) */
        body { 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
            background-color: #f0f0f0; 
            font-family: Arial, sans-serif; 
            overflow: hidden; 
            user-select: none; 
            -webkit-user-select: none;
            transition: background-color 0.5s ease; /* –ü–ª–∞–≤–Ω–∞—è —Å–º–µ–Ω–∞ —Ñ–æ–Ω–∞ */
        }
        .cradle-container {
            position: relative;
            margin-bottom: 30px;
        }
        .cradle { 
            width: 200px; 
            height: 200px; 
            background-color: #fff; 
            border-radius: 50%; 
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            /* –°–¢–ê–†–û–ï: transition: transform 0.1s ease; */
            cursor: pointer;
            border: 5px solid #e0e0e0;
        }
        .cradle:active {
            transform: scale(0.95);
        }
        .cradle img { 
            width: 120px; 
            height: 120px; 
            object-fit: contain;
            pointer-events: none; 
        }
        .timer { 
            margin-bottom: 20px; 
            font-size: 24px; 
            font-weight: bold;
            color: #333;
        }
        .status-bar {
            width: 80%;
            max-width: 400px;
            height: 20px;
            background-color: #ddd;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .anxiety-fill {
            height: 100%;
            width: 0%;
            background-color: #4CAF50;
            transition: width 0.2s, background-color 0.5s;
        }
        .end-button { 
            padding: 15px 30px; 
            font-size: 18px; 
            background-color: #2196F3; 
            color: white; 
            border: none; 
            border-radius: 25px; 
            cursor: pointer; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .end-button:hover { 
            background-color: #1976D2; 
        }
    </style>
</head>
<body>

    <div class="timer" id="timer">–í—ã –ø—Ä–æ–¥–µ—Ä–∂–∞–ª–∏—Å—å: 00:00</div>
    
    <div class="status-bar">
        <div class="anxiety-fill" id="anxietyBar"></div>
    </div>

    <div class="cradle-container">
        <div class="cradle" id="cradle">
            <img id="baby" src="baby_happy.png" alt="Baby">
        </div>
    </div>

    <button class="end-button" id="endButton">–ü—Ä–∏–∑–≤–∞—Ç—å –ú–∞—Ç—å</button>

    <script>
        /* –ó–¥–µ—Å—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ª–æ–≥–∏–∫–∞ (JavaScript) */
        let anxietyLevel = 0;
        let totalTime = 0;
        let calmTime = 0;
        let cryingTime = 0;
        let timerInterval;
        
        // --- –ù–û–í–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï –î–õ–Ø –£–ü–†–ê–í–õ–ï–ù–ò–Ø –¢–ï–ú–ü–û–ú ---
        const BASE_ANXIETY_GAIN = 2; // –ë–∞–∑–æ–≤–∞—è –ø—Ä–∏–±–∞–≤–∫–∞ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–∞
        let currentAnxietyGain = BASE_ANXIETY_GAIN; // –¢–µ–∫—É—â–∞—è –ø—Ä–∏–±–∞–≤–∫–∞
        // ----------------------------------------------
        
        const cradle = document.getElementById('cradle');
        const baby = document.getElementById('baby');
        const timerDisplay = document.getElementById('timer');
        const endButton = document.getElementById('endButton');
        const anxietyBar = document.getElementById('anxietyBar');
        const body = document.body;

        function updateCradle() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–ª–æ—Å–∫—É
            anxietyBar.style.width = anxietyLevel + "%";
            
            if (anxietyLevel < 50) {
                baby.src = "baby_happy.png"; 
                body.style.backgroundColor = "#f0f0f0";
                anxietyBar.style.backgroundColor = "#4CAF50"; 
            } else {
                baby.src = "baby_crying.png"; 
                body.style.backgroundColor = "#ffebee"; 
                anxietyBar.style.backgroundColor = "#f44336"; 
            }
        }

        function updateTimer() {
            totalTime++;
            if (anxietyLevel < 50) {
                calmTime++;
            } else {
                cryingTime++;
            }

            const minutes = Math.floor(totalTime / 60).toString().padStart(2, '0');
            const seconds = (totalTime % 60).toString().padStart(2, '0');
            timerDisplay.textContent = `–í—ã –ø—Ä–æ–¥–µ—Ä–∂–∞–ª–∏—Å—å: ${minutes}:${seconds}`;
        }

        // –ö–ª–∏–∫ –ø–æ –∫–æ–ª—ã–±–µ–ª–∏
        cradle.addEventListener('click', () => {
            // –°–Ω–∏–∂–∞–µ–º –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ
            anxietyLevel = Math.max(0, anxietyLevel - 10);
            
            // --- –ù–û–í–û–ï: –£–°–ö–û–†–ï–ù–ò–ï –ë–ï–°–ü–û–ö–û–ô–°–¢–í–ê ---
            currentAnxietyGain *= 1.2; 
            // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ 80 (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
            // currentAnxietyGain = Math.min(80, currentAnxietyGain); 
            console.log("–ù–æ–≤—ã–π –ø—Ä–∏—Ä–æ—Å—Ç –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–∞:", currentAnxietyGain);
            // --------------------------------------
            
            // --- –ù–û–í–û–ï: –ê–ù–ò–ú–ê–¶–ò–Ø –ù–ê 2 –°–ï–ö–£–ù–î–´ (–°–ª–æ–∂–Ω–∞—è CSS –∞–Ω–∏–º–∞—Ü–∏—è –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ –ø–ª–∞–≤–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç) ---
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ 2 —Å–µ–∫—É–Ω–¥—ã
            cradle.style.transition = 'transform 2s ease-in-out';
            
            // –ù–∞—á–∏–Ω–∞–µ–º –∫–∞—á–∞–Ω–∏–µ
            cradle.style.transform = 'rotate(-5deg)'; 
            
            // –ß–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É –º–µ–Ω—è–µ–º –Ω–∞–∫–ª–æ–Ω
            setTimeout(() => {
                cradle.style.transform = 'rotate(5deg)';
            }, 1000); // 1 —Å–µ–∫—É–Ω–¥–∞
            
            // –ß–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –≤ —Ü–µ–Ω—Ç—Ä –∏ –æ—Ç–∫–ª—é—á–∞–µ–º –¥–ª–∏–Ω–Ω—ã–π transition
            setTimeout(() => {
                cradle.style.transform = 'rotate(0deg)';
                cradle.style.transition = 'none'; // –û—Ç–∫–ª—é—á–∞–µ–º, —á—Ç–æ–±—ã —Å–ª–µ–¥—É—é—â–∏–µ –∫–ª–∏–∫–∏ –Ω–µ –∂–¥–∞–ª–∏ 2 —Å–µ–∫—É–Ω–¥—ã
            }, 2000); // 2 —Å–µ–∫—É–Ω–¥—ã

            updateCradle();
        });

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        function startGame() {
            timerInterval = setInterval(() => {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ currentAnxietyGain
                anxietyLevel = Math.min(100, anxietyLevel + currentAnxietyGain); 
                updateCradle();
                updateTimer();
            }, 1000);
        }

        // –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã
        function endGame() {
            clearInterval(timerInterval);
            const successRate = totalTime > 0 ? (calmTime / totalTime) * 100 : 0;
            let achievement = "";

            if (successRate > 90) {
                achievement = "üèÜ –û—Ç–µ—Ü –ì–æ–¥–∞ 2025! (–ß–∏—Ç–µ—Ä?)";
            } else if (successRate > 70) {
                achievement = "üåü –ú–∞—Å—Ç–µ—Ä –î–∑–µ–Ω: –†–µ–±–µ–Ω–æ–∫ –¥–æ–≤–æ–ª–µ–Ω!";
            } else if (successRate > 50) {
                achievement = "üòê –°—Ç–∞—Ä–∞—Ç–µ–ª—å–Ω—ã–π —Ä–æ–¥–∏—Ç–µ–ª—å. –°—Ä–µ–¥–Ω—è—è —Å–Ω–æ—Ä–æ–≤–∫–∞.";
            } else {
                achievement = "üëÆ‚Äç‚ôÇÔ∏è –°–æ—Å–µ–¥–∏ –≤—ã–∑–≤–∞–ª–∏ –ø–æ–ª–∏—Ü–∏—é. –ù–∞–π–º–∏—Ç–µ –Ω—è–Ω—é.";
            }

            alert(`–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!\n\n–¢–∏—à–∏–Ω–∞: ${successRate.toFixed(0)}%\n–í–∞—à–µ –∑–≤–∞–Ω–∏–µ: ${achievement}`);
            location.reload(); 
        }

        endButton.addEventListener('click', endGame);
        
        startGame();
    </script>
</body>
</html>